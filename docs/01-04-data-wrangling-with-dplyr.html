<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; Data Wrangling with dplyr – Statistical Modeling and Computation for Educational Scientists</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-732fb9ccd080a018ca85ca5d15770f52.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-42960d1493bdc3a4b014a12005315b74.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="assets/sticky-notes.css">
<link rel="stylesheet" href="assets/table-styles.css">
</head>

<body class="nav-sidebar floating fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-00-statistical-computation.html">Introduction to Statistical Computation</a></li><li class="breadcrumb-item"><a href="./01-04-data-wrangling-with-dplyr.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Wrangling with dplyr</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Statistical Modeling and Computation for Educational Scientists</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Front Matter</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./01-00-statistical-computation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Statistical Computation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-01-r-and-rstudio-installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">R and RStudio: Installation and Setup</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-02-getting-started-with-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting Started with R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-03-data-structures-in-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Structures in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-04-data-wrangling-with-dplyr.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Wrangling with dplyr</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-05-visualizing-with-ggplot2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Visualizing Data with ggplot2</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./02-00-intro-to-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Regression</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-01-data-exploration-for-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data Exploration for Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-02-simple-regression-and-correlation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Simple Linear Regression and Correlation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-03-ols-estimation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Ordinary Least Squares (OLS) Estimation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-04-anova-decomposition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">ANOVA Decomposition and <span class="math inline">\(R^2\)</span></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-05-standardized-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Standardized Regression</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./03-00-regression-inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Regression Inference</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-01-coefficient-level-inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Coefficient-Level Inference</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-02-model-level-inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Model-Level Inference</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-03-model-assumptions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Assumptions Underlying the Regression Model</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./04-00-multiple-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multiple Regression</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-01-intro-to-multiple-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Introduction to Multiple Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-02-more-multiple-regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Multiple Regression: ANOVA Decomposition</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-03-understanding-statistical-control.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Understanding Statistical Control</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-04-assumptions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Assumptions: Multiple Regression</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./05-00-categorical-predictors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Categorical Predictors</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-01-dichotomous-predictors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Dichotomous Categorical Predictors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-02-polychotomous-predictors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Polychotomous Categorical Predictors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-03-multiple-comparisons.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Multiple Comparisons</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./06-00-interaction-effects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interaction Effects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-01-intro-to-interaction-effects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Introduction to Interaction Effects</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-02-more-interaction-effects.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">More Interaction Effects</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./07-00-data-codebooks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Codebooks</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/broadband.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">broadband.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/comic-characters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">comic-characters.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/evaluations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">evaluations.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/fertility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">fertility.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/gapminder.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">gapminder.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/keith-gpa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">keith-gpa.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/mn-schools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">mn-schools.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/pew.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">pew.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/riverview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">riverview.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/scoobydoo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">scoobydoo.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/spice-girls.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">spice-girls.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/state-education.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">state-education.csv</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./codebooks/work-demands.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">work-demands.csv</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-00-statistical-computation.html">Introduction to Statistical Computation</a></li><li class="breadcrumb-item"><a href="./01-04-data-wrangling-with-dplyr.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Wrangling with dplyr</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="dplyr" class="quarto-section-identifier"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Wrangling with dplyr</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this chapter, you will be learn about how to use functionality from the <code>{dplyr}</code> package to wrangle your data. Data wrangling is the catchall phrase that includes the processes of cleaning, structuring, and summarizing your data. It is a skill that every educational scientist needs to have in their computational toolkit!</p>
<p>We will use the <strong>comic-characters.csv</strong> data to illustrate how to use several data wrangling functions in order to answer a set of research questions about LGBTQ representation in comics.</p>
<div class="fyi">
<p><strong>Research Questions</strong></p>
<ul>
<li>Who was the first LGBTQ character?
<ul>
<li>Which year did that character first appear?</li>
<li>Did Marvel and DC introduce LGBTQ characters around the same time? Or was one company more progressive?</li>
</ul></li>
<li>What percentage of comic characters identify as LGBTQ?</li>
<li>Did the percentage of comic characters identifying as LGBTQ change after the Pride Movement began?</li>
<li>How does the average number of appearances for comic characters identifying as LGBTQ differ from those who don’t?</li>
</ul>
</div>
<p>To begin, we will load the <code>{dplyr}</code> and <code>{readr}</code> libraries, and import the data into an object called <code>comics</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>comics <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://raw.githubusercontent.com/zief0002/modeling/main/data/comic-characters.csv"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># View data</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(comics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 23,272
Columns: 14
$ character         &lt;chr&gt; "14", "88", "99", "107", "'Spinner", "\"Thumper\" Mo…
$ comic             &lt;chr&gt; "Marvel", "Marvel", "Marvel", "Marvel", "Marvel", "M…
$ reality           &lt;chr&gt; "Earth-616", "Earth-616", "Earth-616", "Earth-616", …
$ identity          &lt;chr&gt; "Secret Identity", "Public Identity", "Secret Identi…
$ alignment         &lt;chr&gt; "Bad", "Bad", "Neutral", "Neutral", "Good", "Bad", "…
$ eye_color         &lt;chr&gt; NA, "Blue", "Blue", "Green", NA, NA, NA, "Blue", NA,…
$ hair_color        &lt;chr&gt; NA, "Blond", NA, NA, NA, "Bald", NA, "White", NA, "B…
$ sex               &lt;chr&gt; "Female", "Male", "Male", "Male", "Male", "Male", "M…
$ lgbtq             &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No", "No"…
$ lgbtq_note        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ alive             &lt;chr&gt; "Living", "Living", "Living", "Living", "Living", "L…
$ appearances       &lt;dbl&gt; 1, 3, 1, 1, NA, NA, 1, 1, 1, 1, 3, 1, 2, 1, 1, 10, N…
$ first_appear_date &lt;chr&gt; "1994, November 01", "1994, March 01", "1994, Novemb…
$ first_appear_year &lt;dbl&gt; 1994, 1994, 1994, 1994, 2007, 1965, 1991, 2010, 2011…</code></pre>
</div>
</div>
<p><br></p>
<section id="piping-the-key-to-using-dplyr" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="piping-the-key-to-using-dplyr"><span class="header-section-number">4.1</span> Piping: The Key to Using dplyr</h2>
<p>Recall that functions work by taking arguments as inputs and then producing an output. For example, the <code>glimpse()</code> function takes the <code>comics</code> data frame as its input.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(comics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We could get the same result by using the pipe operator (<code>|&gt;</code>). This operator takes a DATA FRAME, or a tibble, (given immediately before the operator) and uses it as the FIRST argument in the function that comes immediately after the pipe operator.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The pipe operator makes comics the first argument of the glimpse() function</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 23,272
Columns: 14
$ character         &lt;chr&gt; "14", "88", "99", "107", "'Spinner", "\"Thumper\" Mo…
$ comic             &lt;chr&gt; "Marvel", "Marvel", "Marvel", "Marvel", "Marvel", "M…
$ reality           &lt;chr&gt; "Earth-616", "Earth-616", "Earth-616", "Earth-616", …
$ identity          &lt;chr&gt; "Secret Identity", "Public Identity", "Secret Identi…
$ alignment         &lt;chr&gt; "Bad", "Bad", "Neutral", "Neutral", "Good", "Bad", "…
$ eye_color         &lt;chr&gt; NA, "Blue", "Blue", "Green", NA, NA, NA, "Blue", NA,…
$ hair_color        &lt;chr&gt; NA, "Blond", NA, NA, NA, "Bald", NA, "White", NA, "B…
$ sex               &lt;chr&gt; "Female", "Male", "Male", "Male", "Male", "Male", "M…
$ lgbtq             &lt;chr&gt; "No", "No", "No", "No", "No", "No", "No", "No", "No"…
$ lgbtq_note        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ alive             &lt;chr&gt; "Living", "Living", "Living", "Living", "Living", "L…
$ appearances       &lt;dbl&gt; 1, 3, 1, 1, NA, NA, 1, 1, 1, 1, 3, 1, 2, 1, 1, 10, N…
$ first_appear_date &lt;chr&gt; "1994, November 01", "1994, March 01", "1994, Novemb…
$ first_appear_year &lt;dbl&gt; 1994, 1994, 1994, 1994, 2007, 1965, 1991, 2010, 2011…</code></pre>
</div>
</div>
<p>Note since the <code>glimpse()</code> function did NOT include any additional arguments, we do not include anything between the parentheses after we pipe. Here is another example that illustrate the use of the pipe operator.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count number of rows in comics data frame</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(comics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23272</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Can be written using the pipe operator as...</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23272</code></pre>
</div>
</div>
<p>One last example will show how we use the additional arguments in the function following the pipe operator. For example, say we wanted to use the <code>print()</code> function to print the tibble/data frame, and we wanted to show all of the columns. The <code>print()</code> function would include not only the name of the tibble we wanted to print, but also the argument <code>width=Inf</code>. Here is the syntax for this:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print all columns of comics tibble</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(comics, <span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using piping, the syntax would be:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print all columns of comics tibble</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span> <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23,272 × 14
   character                  comic  reality   identity        alignment
   &lt;chr&gt;                      &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt;    
 1 "14"                       Marvel Earth-616 Secret Identity Bad      
 2 "88"                       Marvel Earth-616 Public Identity Bad      
 3 "99"                       Marvel Earth-616 Secret Identity Neutral  
 4 "107"                      Marvel Earth-616 Secret Identity Neutral  
 5 "'Spinner"                 Marvel Earth-616 Secret Identity Good     
 6 "\"Thumper\" Morgan"       Marvel Earth-616 Secret Identity Bad      
 7 "11-Ball"                  Marvel Earth-616 Secret Identity Bad      
 8 "115 (Legion Personality)" Marvel Earth-616 Secret Identity Neutral  
 9 "181 (Legion Personality)" Marvel Earth-616 Secret Identity Neutral  
10 "1X"                       Marvel Earth-616 Public Identity Good     
   eye_color hair_color sex    lgbtq lgbtq_note alive  appearances
   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;        &lt;dbl&gt;
 1 &lt;NA&gt;      &lt;NA&gt;       Female No    &lt;NA&gt;       Living           1
 2 Blue      Blond      Male   No    &lt;NA&gt;       Living           3
 3 Blue      &lt;NA&gt;       Male   No    &lt;NA&gt;       Living           1
 4 Green     &lt;NA&gt;       Male   No    &lt;NA&gt;       Living           1
 5 &lt;NA&gt;      &lt;NA&gt;       Male   No    &lt;NA&gt;       Living          NA
 6 &lt;NA&gt;      Bald       Male   No    &lt;NA&gt;       Living          NA
 7 &lt;NA&gt;      &lt;NA&gt;       Male   No    &lt;NA&gt;       Living           1
 8 Blue      White      Female No    &lt;NA&gt;       Living           1
 9 &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;   No    &lt;NA&gt;       Living           1
10 &lt;NA&gt;      Blond      Male   No    &lt;NA&gt;       Living           1
   first_appear_date first_appear_year
   &lt;chr&gt;                         &lt;dbl&gt;
 1 1994, November 01              1994
 2 1994, March 01                 1994
 3 1994, November 01              1994
 4 1994, November 01              1994
 5 2022, November 07              2007
 6 1965, February 01              1965
 7 1991, July 01                  1991
 8 2022, August 10                2010
 9 2022, July 11                  2011
10 1940, March 01                 1940
# ℹ 23,262 more rows</code></pre>
</div>
</div>
<p>Here, <code>comics</code> will be inputted as the FIRST argument in the <code>print()</code> function, and any additional arguments are simply included in the <code>print()</code> function itself.</p>
<div class="protip">
<p><strong>PROTIP</strong></p>
<p>It is a good coding practice to use multiple lines when you are piping rather than putting all the syntax on a single line. When you do this, the pipe operator (<code>|&gt;</code>) needs to come at the end of the line. You can see this in the code below, where the pipe operator is placed at the end of the first line of syntax; not at the beginning of the second line of syntax. <strong>Include a line break after every pipe operator you use.</strong></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print all columns of comics tibble</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><br></p>
</section>
<section id="common-dplyr-functions-for-data-wrangling" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="common-dplyr-functions-for-data-wrangling"><span class="header-section-number">4.2</span> Common dplyr Functions for Data Wrangling</h2>
<p>Here are some common operations that researchers use to prepare data for analysis (i.e., data preparation, data wrangling, data cleaning) and the corresponding <code>{dplyr}</code> functions:</p>
<ul>
<li><code>filter()</code>: Select a subset of rows from a data frame.</li>
<li><code>select()</code>: Select a subset of columns from a data frame.</li>
<li><code>mutate()</code>: Add new columns to a data frame.</li>
<li><code>arrange()</code>: Sort and re-order data in a data frame.</li>
<li><code>summarize()</code>: Compute summaries of columns in a data frame.</li>
<li><code>group_by()</code>: Group the data to carry out computations for each group.</li>
</ul>
<p><br></p>
</section>
<section id="sorting-the-data-arranging" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="sorting-the-data-arranging"><span class="header-section-number">4.3</span> Sorting the Data: Arranging</h2>
<p>To answer our initial set of research questions related to early representation of LGBTQ characters in comics, it is useful to sort the data by both LGBTQ status and year of first appearance. The <code>arrange()</code> function sorts the data based on the values within one or more specified columns. The data is ordered based on the column name provided in the argument(s). The syntax below sorts the rows in the <code>comics</code> data frame from earliest to most recent year of first appearance.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort data from earliest to most recent year of first appearance</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(first_appear_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23,272 × 14
   character   comic reality identity alignment eye_color hair_color sex   lgbtq
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;
 1 Richard Oc… DC    New Ea… Secret … &lt;NA&gt;      Grey      Black      Male  No   
 2 Arthur Pen… DC    New Ea… Public … Good      Brown     Brown      Male  No   
 3 Bedivere    DC    New Ea… &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;       Male  No   
 4 Franklin D… DC    New Ea… Public … Good      &lt;NA&gt;      Grey       Male  No   
 5 Gareth      DC    New Ea… &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;       Male  No   
 6 Gawain      DC    New Ea… Public … Good      &lt;NA&gt;      &lt;NA&gt;       Male  No   
 7 Guinevere   DC    New Ea… Public … Good      &lt;NA&gt;      Blond      Fema… No   
 8 Lady of th… DC    New Ea… &lt;NA&gt;     Good      Blue      Blue       Fema… No   
 9 Lancelot    DC    New Ea… Public … Good      &lt;NA&gt;      &lt;NA&gt;       Male  No   
10 Merlin      DC    New Ea… Secret … Neutral   Black     White      Male  No   
# ℹ 23,262 more rows
# ℹ 5 more variables: lgbtq_note &lt;chr&gt;, alive &lt;chr&gt;, appearances &lt;dbl&gt;,
#   first_appear_date &lt;chr&gt;, first_appear_year &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Here we see the earliest character in these data (Richard Occult) appeared in 1935. This, however, does not give us the first LBGTQ character. To determine this, we need to sort on LGBTQ status in addition to year of first appearance.</p>
<p>Providing the <code>arrange()</code> function multiple arguments sort initially by the column name given in first argument, and then by the columns given in subsequent arguments. Here the data are sorted first by LGBTQ status (alphabetically since <code>lgbtq</code> is a character string) and then by year of first appearance.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort data by LGBTQ status and then from earliest to most recent year of first appearance</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(lgbtq, first_appear_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23,272 × 14
   character   comic reality identity alignment eye_color hair_color sex   lgbtq
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;
 1 Richard Oc… DC    New Ea… Secret … &lt;NA&gt;      Grey      Black      Male  No   
 2 Arthur Pen… DC    New Ea… Public … Good      Brown     Brown      Male  No   
 3 Bedivere    DC    New Ea… &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;       Male  No   
 4 Franklin D… DC    New Ea… Public … Good      &lt;NA&gt;      Grey       Male  No   
 5 Gareth      DC    New Ea… &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;       Male  No   
 6 Gawain      DC    New Ea… Public … Good      &lt;NA&gt;      &lt;NA&gt;       Male  No   
 7 Guinevere   DC    New Ea… Public … Good      &lt;NA&gt;      Blond      Fema… No   
 8 Lady of th… DC    New Ea… &lt;NA&gt;     Good      Blue      Blue       Fema… No   
 9 Lancelot    DC    New Ea… Public … Good      &lt;NA&gt;      &lt;NA&gt;       Male  No   
10 Merlin      DC    New Ea… Secret … Neutral   Black     White      Male  No   
# ℹ 23,262 more rows
# ℹ 5 more variables: lgbtq_note &lt;chr&gt;, alive &lt;chr&gt;, appearances &lt;dbl&gt;,
#   first_appear_date &lt;chr&gt;, first_appear_year &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Because <code>No</code> is alphabetically before <code>Yes</code>, the non-LGBTQ characters are printed first. Because only the first 10 rows of a tibble are printed (and all 10 are non-LGBTQ characters), we still can’t quite answer our research question. If you want to see all of the sorted data or operate on it further, you need to (a) explicitly tell R to print all of the rows, or (b) assign the output into an object which can be viewed and scrolled through by clicking on the object in the RStudio <code>Environment</code> pane.</p>
<p>To print all of the rows to the console, we can pipe the sorted data into the <code>print()</code> function, and include the argument <code>N=Inf</code>. Reminder: Best practice is to start a new line after each pipe operator!</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort data by LGBTQ status and then from earliest to most recent year of first appearance</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Print all the rows</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(lgbtq, first_appear_year) <span class="sc">|&gt;</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">N =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23,272 × 14
   character   comic reality identity alignment eye_color hair_color sex   lgbtq
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;
 1 Richard Oc… DC    New Ea… Secret … &lt;NA&gt;      Grey      Black      Male  No   
 2 Arthur Pen… DC    New Ea… Public … Good      Brown     Brown      Male  No   
 3 Bedivere    DC    New Ea… &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;       Male  No   
 4 Franklin D… DC    New Ea… Public … Good      &lt;NA&gt;      Grey       Male  No   
 5 Gareth      DC    New Ea… &lt;NA&gt;     &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;       Male  No   
 6 Gawain      DC    New Ea… Public … Good      &lt;NA&gt;      &lt;NA&gt;       Male  No   
 7 Guinevere   DC    New Ea… Public … Good      &lt;NA&gt;      Blond      Fema… No   
 8 Lady of th… DC    New Ea… &lt;NA&gt;     Good      Blue      Blue       Fema… No   
 9 Lancelot    DC    New Ea… Public … Good      &lt;NA&gt;      &lt;NA&gt;       Male  No   
10 Merlin      DC    New Ea… Secret … Neutral   Black     White      Male  No   
# ℹ 23,262 more rows
# ℹ 5 more variables: lgbtq_note &lt;chr&gt;, alive &lt;chr&gt;, appearances &lt;dbl&gt;,
#   first_appear_date &lt;chr&gt;, first_appear_year &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Another way to view the entire set of data is to assign the sorted data into an object and then click on that object in the environment pane.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort data by LGBTQ status and then from earliest to most recent year of first appearance</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Assign to the object 'sorted_comics'</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>sorted_comics <span class="ot">=</span> comics <span class="sc">|&gt;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(lgbtq, first_appear_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<figcaption>Clicking the <code>sorted_comics</code> data object in the Environment pane will display the data in the RStudio data viewer.</figcaption>
<p><img src="figs/01-04-click-data-object.png" class="img-fluid figure-img" style="width:70.0%" alt="Clicking the `sorted_comics` data object in the Environment pane will display the data in the RStudio data viewer."></p>
</figure>
</div>
</div>
</div>
<p>Based on an examination of the sorted data, we find the first appearance of an LGBTQ character is Jack Casey in 1940.</p>
<p><br></p>
<section id="sorting-in-descending-order" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="sorting-in-descending-order"><span class="header-section-number">4.3.1</span> Sorting in Descending Order</h3>
<p>Rather than scrolling through the data, we could also have sorted the data so that the characters with LGBTQ status of “Yes” are printed first. To do this we want to sort the data initially (using the<code>lgbtq</code> column) in reverse alphabetical order (“Yes” followed by “No”).</p>
<p>Use the <code>desc()</code> function on a column name to sort the data in descending order. Here the data are sorted in descending order by LGBTQ status and then by year of first appearance (in ascending order).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort data by LGBTQ status and then from earliest to most recent year of first appearance</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(lgbtq), first_appear_year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23,272 × 14
   character   comic reality identity alignment eye_color hair_color sex   lgbtq
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;
 1 Jack Casey  Marv… Earth-… No Dual… Good      &lt;NA&gt;      Brown      Male  Yes  
 2 Mortimer D… DC    New Ea… Secret … Bad       Brown     Brown      Male  Yes  
 3 Roger Aubr… Marv… Earth-… Secret … &lt;NA&gt;      Blue      Blond      Male  Yes  
 4 Chili Storm Marv… Earth-… Public … &lt;NA&gt;      Green     Red        Fema… Yes  
 5 Loki Laufe… Marv… Earth-… No Dual… Neutral   Green     Black      Gend… Yes  
 6 Hartley Ra… DC    New Ea… Secret … Good      Blue      Red        Male  Yes  
 7 Jonathan C… Marv… Earth-… Secret … Good      Blue      Red        Male  Yes  
 8 Brain       DC    New Ea… Secret … Bad       &lt;NA&gt;      &lt;NA&gt;       Male  Yes  
 9 Mallah      DC    New Ea… Secret … Bad       Brown     Brown      Male  Yes  
10 Natalia Ro… Marv… Earth-… Public … Good      Green     Red        Fema… Yes  
# ℹ 23,262 more rows
# ℹ 5 more variables: lgbtq_note &lt;chr&gt;, alive &lt;chr&gt;, appearances &lt;dbl&gt;,
#   first_appear_date &lt;chr&gt;, first_appear_year &lt;dbl&gt;</code></pre>
</div>
</div>
<p><br></p>
</section>
</section>
<section id="obtain-a-subset-of-rows-filtering" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="obtain-a-subset-of-rows-filtering"><span class="header-section-number">4.4</span> Obtain a Subset of Rows: Filtering</h2>
<p>There are many times in research applications that an educational scientist will need to select a subset of data cases. This type of application, for example, is quite common when we carry out demographic analyses (e.g., select the special education students, select students on free/reduced-price lunch). To select a subset of rows from a tibble or data frame, we will pipe the data frame we want to select rows from into the <code>filter()</code> function.</p>
<p>The argument(s) for the <code>filter()</code> function are logical expressions that will be used to select the rows. For example, suppose we wanted to select the LGBTQ characters (i.e., rows) from the <code>comics</code> data frame. We would need a logical expression that returns a <code>TRUE</code> value for all the LGBTQ characters. One such logical expression is: <code>lgbtq=="Yes"</code>. Recall that a single equals sign (<code>=</code>) is the assignment operator and that to say “is equal to”, we need to use two equals signs (<code>==</code>). Including this logical expression in the <code>filter()</code> function, the syntax for selecting the LGBTQ characters is then:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the LGBTQ characters</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgbtq <span class="sc">==</span> <span class="st">"Yes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 155 × 14
   character   comic reality identity alignment eye_color hair_color sex   lgbtq
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;
 1 Achilles W… DC    New Ea… Secret … Good      Blue      Blond      Male  Yes  
 2 Aimee (Cli… Marv… Earth-… No Dual… Good      Black     Pink       Fema… Yes  
 3 Akihiro     Marv… Earth-… Secret … Bad       Blue      Black      Male  Yes  
 4 Alana Jobs… Marv… Earth-… Secret … Good      Green     Brown      Fema… Yes  
 5 Aleksandr … DC    New Ea… Secret … Good      &lt;NA&gt;      Brown      Male  Yes  
 6 Alexander … DC    New Ea… Public … Bad       Brown     Red        Male  Yes  
 7 Amy Chen    Marv… Earth-… Secret … Neutral   Black     Black      Fema… Yes  
 8 Anaya       DC    New Ea… &lt;NA&gt;     Good      Brown     Brown      Fema… Yes  
 9 Anissa Pie… DC    New Ea… Secret … Good      Brown     Black      Fema… Yes  
10 Annabelle … Marv… Earth-… Public … Good      Blue      Brown      Fema… Yes  
# ℹ 145 more rows
# ℹ 5 more variables: lgbtq_note &lt;chr&gt;, alive &lt;chr&gt;, appearances &lt;dbl&gt;,
#   first_appear_date &lt;chr&gt;, first_appear_year &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Note that the output from this computation (data for the LGBTQ characters) is only printed to the screen. If you want to keep the filtered data or operate on it further, you need to assign the output into an object.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the LGBTQ characters</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>lgbtq_characters <span class="ot">=</span> comics <span class="sc">|&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgbtq <span class="sc">==</span> <span class="st">"Yes"</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of rows</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(lgbtq_characters)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 155</code></pre>
</div>
</div>
<p>We could have found the same result exclusively using piping; without the interim assignment.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the LGBTQ characters and count the rows</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgbtq <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">|&gt;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 155</code></pre>
</div>
</div>
<p>The first pipe operator uses the <code>comics</code> data frame in the <code>filter()</code> function to select the LGBTQ characters. This output (only the LGBTQ characters) is then used in the <code>nrow()</code> function to count the number of rows. It is akin to a constant pipeline of chaining functions together (i.e., <code>nrow(filter(comics, lgbtq == "Yes"))</code>); the output of a computation is used as the input into the next computation in the pipeline.</p>
<p>Based on this result (and the results from the earlier <code>glimpse()</code> output), we can now answer our first research question: What percentage of comic characters identify as LGBTQ?</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentage of LGBTQ characters</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="dv">155</span> <span class="sc">/</span> <span class="dv">23272</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.006660364</code></pre>
</div>
</div>
<p>Only 0.6% of comic characters identified as LGBTQ (at least as of 2014). This is well below 7.1%, the percentage of U.S. adults who self-identify as lesbian, gay, bisexual, transgender or something other than heterosexual according to a <a href="https://news.gallup.com/poll/389792/lgbt-identification-ticks-up.aspx">2022 Gallup Poll</a>. (This is even below the 2012 estimate of 3.5%.) This suggests that the LGBTQ population is likely underrepresented in comic culture.</p>
<p><br></p>
<section id="filtering-on-multiple-attributes" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="filtering-on-multiple-attributes"><span class="header-section-number">4.4.1</span> Filtering on Multiple Attributes</h3>
<p>You can filter on multiple attributes by including more than one logical statement in the <code>filter()</code> function. For example, say we wanted to determine if the Pride Movement had an impact on LGBTQ representation in comics. The first Pride parade took place in March 1970, so we could look at the percentage of LGBTQ comic characters introduced prior to 1970 and compare it to the percentage of LGBTQ comic characters introduced in 1970 or later.</p>
<p>The syntax below counts the number of LGBTQ comic characters introduced prior to 1970. We also compute the total number of character introduced prior to 1970 to compute the correct percentage.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count LGBTQ characters introduced prior to 1970</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgbtq <span class="sc">==</span> <span class="st">"Yes"</span>, first_appear_date <span class="sc">&lt;</span> <span class="dv">1970</span>) <span class="sc">|&gt;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count all characters introduced prior to 1970</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(first_appear_date <span class="sc">&lt;</span> <span class="dv">1970</span>) <span class="sc">|&gt;</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4002</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentage</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="sc">/</span> <span class="dv">4002</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.002748626</code></pre>
</div>
</div>
<p>Of the 4002 characters introduced prior to 1970, 0.27% identified as LGBTQ.</p>
<p>Here, when we included multiple logical expressions in the <code>filter()</code> function, separated by a comma, they were linked using the AND (<code>&amp;</code>) operator. This means that both expressions have to evaluate as <code>TRUE</code> to be included. We could also have explicitly used the <code>&amp;</code> operator to link the two statements.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgbtq <span class="sc">==</span> <span class="st">"Yes"</span>, sex <span class="sc">==</span> <span class="st">"Female"</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Is equivalent to...</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgbtq <span class="sc">==</span> <span class="st">"Yes"</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">"Female"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>We can also <code>filter()</code> using the OR (<code>|</code>) operator. This means that if EITHER logical expression included in the <code>filter()</code> function evaluates as TRUE, the row is included in the output. For example, say we wanted to count the number of comic characters who are either female or identify as LGBTQ. The syntax for this would be:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count character who are LGBTQ or are female</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgbtq <span class="sc">==</span> <span class="st">"Yes"</span> <span class="sc">|</span> sex <span class="sc">==</span> <span class="st">"Female"</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5890</code></pre>
</div>
</div>
<p><br></p>
</section>
</section>
<section id="selecting-a-subset-of-columns" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="selecting-a-subset-of-columns"><span class="header-section-number">4.5</span> Selecting a Subset of Columns</h2>
<p>Suppose a journalist at <a href="https://lavendermagazine.com/">Lavender Magazine</a> is writing a story about the representation of LGBTQ comic characters and has asked you to create a new dataset for their work that only includes the LGBTQ comic characters. Moreover, this new dataset should also only include the characters’ name, year of first appearance, and the LGBTQ note. To complete this task, we need to select not only a subset of rows from the original data, but also a subset of the columns.</p>
<p>To select a subset of columns, we will use the <code>select()</code> function. The argument(s) for this function are the column names of the data frame that you want to select. For example, to select the <code>character</code>, <code>first_appear_year</code>, and <code>lgbtq_note</code> columns from the <code>comics</code> data frame we would use the following syntax:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select a subset of columns</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(character, first_appear_year, lgbtq_note)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23,272 × 3
   character                  first_appear_year lgbtq_note
   &lt;chr&gt;                                  &lt;dbl&gt; &lt;chr&gt;     
 1 "14"                                    1994 &lt;NA&gt;      
 2 "88"                                    1994 &lt;NA&gt;      
 3 "99"                                    1994 &lt;NA&gt;      
 4 "107"                                   1994 &lt;NA&gt;      
 5 "'Spinner"                              2007 &lt;NA&gt;      
 6 "\"Thumper\" Morgan"                    1965 &lt;NA&gt;      
 7 "11-Ball"                               1991 &lt;NA&gt;      
 8 "115 (Legion Personality)"              2010 &lt;NA&gt;      
 9 "181 (Legion Personality)"              2011 &lt;NA&gt;      
10 "1X"                                    1940 &lt;NA&gt;      
# ℹ 23,262 more rows</code></pre>
</div>
</div>
<p>We can combine this column selection with our filtering to select the LGBTQ characters. Note that since the <code>filter()</code> function uses the data in the <code>lgbtq</code> column, we need to apply the filter before we selecting the three columns we want. If we use <code>select()</code> prior to filtering, we will get an error since the column <code>lgbtq</code> was not included in the <code>select()</code> function.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This order produces and error</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(character, first_appear_year, lgbtq_note) <span class="sc">|&gt;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgbtq <span class="sc">==</span> <span class="st">"Yes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `filter()`:
ℹ In argument: `lgbtq == "Yes"`.
Caused by error:
! object 'lgbtq' not found</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This order gets us the data we want</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgbtq <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">|&gt;</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(character, first_appear_year, lgbtq_note)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 155 × 3
   character                       first_appear_year lgbtq_note
   &lt;chr&gt;                                       &lt;dbl&gt; &lt;chr&gt;     
 1 Achilles Warkiller                           2009 Homosexual
 2 Aimee (Clint Barton's neighbor)              2012 Homosexual
 3 Akihiro                                      2006 Bisexual  
 4 Alana Jobson                                 2008 Homosexual
 5 Aleksandr Creote                             2003 Homosexual
 6 Alexander Burgess                            1989 Homosexual
 7 Amy Chen                                     1992 Homosexual
 8 Anaya                                        2001 Homosexual
 9 Anissa Pierce                                2003 Homosexual
10 Annabelle Riggs                              2013 Homosexual
# ℹ 145 more rows</code></pre>
</div>
</div>
<p>Lastly, in order to get this data to the journalist, we need to export the data from R to our computer. The <code>{readr}</code> package includes several functions that allow us to export data from R in a variety of formats. Here we will use the <code>write_csv()</code> function to export the data into a CSV file. This function necessitates that we provide the path and filename for where we want to save the exported CSV file. For example, to write a CSV file called <code>lgbtq-comic-characters.csv</code> to the desktop on a Mac we could use the following syntax:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset data and export it</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgbtq <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">|&gt;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(character, first_appear_year, lgbtq_note) <span class="sc">|&gt;</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(<span class="st">"/Users/username/Desktop/lgbtq-comic-characters.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The syntax to do this on a PC would be something like the following:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Subset data and export it</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lgbtq <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">|&gt;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(character, first_appear_year, lgbtq_note) <span class="sc">|&gt;</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(<span class="st">"C:\Users\username\Desktop\lgbtq-comic-characters.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In both of the Mac and PC examples, the part of the pathname called <code>username</code> needs to be modified to be the user name for your computer. Typically this is the username you use to login to your computer.</p>
<p><br></p>
<section id="helper-functions-for-select" class="level3" data-number="4.5.1">
<h3 data-number="4.5.1" class="anchored" data-anchor-id="helper-functions-for-select"><span class="header-section-number">4.5.1</span> Helper Functions for <code>select()</code></h3>
<p>There are a number of helper functions you can use within the <code>select()</code> function. For example, <code>starts_with()</code>, <code>ends_with()</code>, and <code>contains()</code>. These let you quickly match larger blocks of columns that meet some criterion. The syntax below illustrates a couple of these functions. You can read about other helper functions and see examples <a href="https://riptutorial.com/dplyr/example/26251/helper-functions">here</a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select all the columns that have a column name that ends in 'r'</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"r"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23,272 × 4
   character                  eye_color hair_color first_appear_year
   &lt;chr&gt;                      &lt;chr&gt;     &lt;chr&gt;                  &lt;dbl&gt;
 1 "14"                       &lt;NA&gt;      &lt;NA&gt;                    1994
 2 "88"                       Blue      Blond                   1994
 3 "99"                       Blue      &lt;NA&gt;                    1994
 4 "107"                      Green     &lt;NA&gt;                    1994
 5 "'Spinner"                 &lt;NA&gt;      &lt;NA&gt;                    2007
 6 "\"Thumper\" Morgan"       &lt;NA&gt;      Bald                    1965
 7 "11-Ball"                  &lt;NA&gt;      &lt;NA&gt;                    1991
 8 "115 (Legion Personality)" Blue      White                   2010
 9 "181 (Legion Personality)" &lt;NA&gt;      &lt;NA&gt;                    2011
10 "1X"                       &lt;NA&gt;      Blond                   1940
# ℹ 23,262 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select all the columns that have a column name that contains an underscore</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"_"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23,272 × 5
   eye_color hair_color lgbtq_note first_appear_date first_appear_year
   &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;                         &lt;dbl&gt;
 1 &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;       1994, November 01              1994
 2 Blue      Blond      &lt;NA&gt;       1994, March 01                 1994
 3 Blue      &lt;NA&gt;       &lt;NA&gt;       1994, November 01              1994
 4 Green     &lt;NA&gt;       &lt;NA&gt;       1994, November 01              1994
 5 &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;       2022, November 07              2007
 6 &lt;NA&gt;      Bald       &lt;NA&gt;       1965, February 01              1965
 7 &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;       1991, July 01                  1991
 8 Blue      White      &lt;NA&gt;       2022, August 10                2010
 9 &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;       2022, July 11                  2011
10 &lt;NA&gt;      Blond      &lt;NA&gt;       1940, March 01                 1940
# ℹ 23,262 more rows</code></pre>
</div>
</div>
<p><br></p>
</section>
<section id="renaming-columns" class="level3" data-number="4.5.2">
<h3 data-number="4.5.2" class="anchored" data-anchor-id="renaming-columns"><span class="header-section-number">4.5.2</span> Renaming Columns</h3>
<p>You can rename a column by using the <code>rename()</code> function. Here we select the <code>character</code>, <code>eye_color</code>, and <code>hair_color</code> columns from the <code>comics</code> data frame and then rename the <code>eye_color</code> and <code>hair_color</code> columns to <code>eye</code> and <code>hair</code>, respectively. Note that this works similar to assignment in that the new column name is to the left of the equal sign.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select 3 columns and rename 2 of them</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(character, eye_color, hair_color) <span class="sc">%&gt;%</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">eye =</span> eye_color, <span class="at">hair =</span> hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23,272 × 3
   character                  eye   hair 
   &lt;chr&gt;                      &lt;chr&gt; &lt;chr&gt;
 1 "14"                       &lt;NA&gt;  &lt;NA&gt; 
 2 "88"                       Blue  Blond
 3 "99"                       Blue  &lt;NA&gt; 
 4 "107"                      Green &lt;NA&gt; 
 5 "'Spinner"                 &lt;NA&gt;  &lt;NA&gt; 
 6 "\"Thumper\" Morgan"       &lt;NA&gt;  Bald 
 7 "11-Ball"                  &lt;NA&gt;  &lt;NA&gt; 
 8 "115 (Legion Personality)" Blue  White
 9 "181 (Legion Personality)" &lt;NA&gt;  &lt;NA&gt; 
10 "1X"                       &lt;NA&gt;  Blond
# ℹ 23,262 more rows</code></pre>
</div>
</div>
<p><br></p>
</section>
</section>
<section id="create-new-columns-mutating" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="create-new-columns-mutating"><span class="header-section-number">4.6</span> Create New Columns: Mutating</h2>
<p>To create new columns, we will use the <code>mutate()</code> function. Here we create a new column called <code>num_years</code> based on subtracting the year of the character’s first appearance from the current year (2022 as of this writing).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_years =</span> <span class="dv">2022</span> <span class="sc">-</span> first_appear_year</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23,272 × 15
   character   comic reality identity alignment eye_color hair_color sex   lgbtq
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;
 1 "14"        Marv… Earth-… Secret … Bad       &lt;NA&gt;      &lt;NA&gt;       Fema… No   
 2 "88"        Marv… Earth-… Public … Bad       Blue      Blond      Male  No   
 3 "99"        Marv… Earth-… Secret … Neutral   Blue      &lt;NA&gt;       Male  No   
 4 "107"       Marv… Earth-… Secret … Neutral   Green     &lt;NA&gt;       Male  No   
 5 "'Spinner"  Marv… Earth-… Secret … Good      &lt;NA&gt;      &lt;NA&gt;       Male  No   
 6 "\"Thumper… Marv… Earth-… Secret … Bad       &lt;NA&gt;      Bald       Male  No   
 7 "11-Ball"   Marv… Earth-… Secret … Bad       &lt;NA&gt;      &lt;NA&gt;       Male  No   
 8 "115 (Legi… Marv… Earth-… Secret … Neutral   Blue      White      Fema… No   
 9 "181 (Legi… Marv… Earth-… Secret … Neutral   &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;  No   
10 "1X"        Marv… Earth-… Public … Good      &lt;NA&gt;      Blond      Male  No   
# ℹ 23,262 more rows
# ℹ 6 more variables: lgbtq_note &lt;chr&gt;, alive &lt;chr&gt;, appearances &lt;dbl&gt;,
#   first_appear_date &lt;chr&gt;, first_appear_year &lt;dbl&gt;, num_years &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="fyi">
<p><strong>PROTIP</strong></p>
<p>If you are running this in the console, the <code>num_years</code> column won’t be displayed because of the default printing options for tibbles; the new column is created, just not displayed. To view it, we can use the <code>print()</code> function with the argument <code>width=Inf</code>, which displays all columns in the tibble.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a new column and display all the columns</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_years =</span> <span class="dv">2022</span> <span class="sc">-</span> first_appear_year</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">width =</span> <span class="cn">Inf</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><br></p>
<section id="creating-multiple-new-columns" class="level3" data-number="4.6.1">
<h3 data-number="4.6.1" class="anchored" data-anchor-id="creating-multiple-new-columns"><span class="header-section-number">4.6.1</span> Creating Multiple New Columns</h3>
<p>You can create multiple new columns within the same <code>mutate()</code> function. Simply include each new column as an argument. Below we again create <code>num_years</code>, but we also additionally create <code>centered_appearances</code> which computes the difference between the number of appearances for each character and the mean number of appearances.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add two new columns</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_years =</span> <span class="dv">2022</span> <span class="sc">-</span> first_appear_year,</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">centered_appearances =</span> appearances <span class="sc">-</span> <span class="fu">mean</span>(appearances, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23,272 × 16
   character   comic reality identity alignment eye_color hair_color sex   lgbtq
   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt;
 1 "14"        Marv… Earth-… Secret … Bad       &lt;NA&gt;      &lt;NA&gt;       Fema… No   
 2 "88"        Marv… Earth-… Public … Bad       Blue      Blond      Male  No   
 3 "99"        Marv… Earth-… Secret … Neutral   Blue      &lt;NA&gt;       Male  No   
 4 "107"       Marv… Earth-… Secret … Neutral   Green     &lt;NA&gt;       Male  No   
 5 "'Spinner"  Marv… Earth-… Secret … Good      &lt;NA&gt;      &lt;NA&gt;       Male  No   
 6 "\"Thumper… Marv… Earth-… Secret … Bad       &lt;NA&gt;      Bald       Male  No   
 7 "11-Ball"   Marv… Earth-… Secret … Bad       &lt;NA&gt;      &lt;NA&gt;       Male  No   
 8 "115 (Legi… Marv… Earth-… Secret … Neutral   Blue      White      Fema… No   
 9 "181 (Legi… Marv… Earth-… Secret … Neutral   &lt;NA&gt;      &lt;NA&gt;       &lt;NA&gt;  No   
10 "1X"        Marv… Earth-… Public … Good      &lt;NA&gt;      Blond      Male  No   
# ℹ 23,262 more rows
# ℹ 7 more variables: lgbtq_note &lt;chr&gt;, alive &lt;chr&gt;, appearances &lt;dbl&gt;,
#   first_appear_date &lt;chr&gt;, first_appear_year &lt;dbl&gt;, num_years &lt;dbl&gt;,
#   centered_appearances &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Note that the <code>mean()</code> function includes the optional argument <code>na.rm=TRUE</code> which allows the mean computation when there are <code>NA</code> values; it tells the <code>mean()</code> function to remove the NAs in the computation. (If you didn’t remove the NAs, the result of the computation would be an <code>NA</code>.)</p>
<div class="fyi">
<p><strong>FYI</strong></p>
<p>If you want to continue to use the newly created columns, you need to assign the output into an object. If you do not assign the output into an object, the data with the new columns is printed to the screen and then the new columns are promptly “forgotten” by R. If you are sure of your syntax, you can re-assign the data into the original object. Here we create the new columns and re-assign this into the <code>comics</code> object.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add two new columns and re-assign to 'comics'</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>comics <span class="ot">=</span> comics <span class="sc">|&gt;</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_years =</span> <span class="dv">2022</span> <span class="sc">-</span> first_appear_year,</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">centered_appearances =</span> appearances <span class="sc">-</span> <span class="fu">mean</span>(appearances, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p><br></p>
</section>
</section>
<section id="computing-summaries-of-data-in-a-column" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="computing-summaries-of-data-in-a-column"><span class="header-section-number">4.7</span> Computing Summaries of Data in a Column</h2>
<p>The <code>summarize()</code> function is used to compute summaries of data in a given column. Here we compute the mean number of appearances for all comic characters in the data.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">M =</span> <span class="fu">mean</span>(appearances, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
      M
  &lt;dbl&gt;
1  19.0</code></pre>
</div>
</div>
<div class="protip">
<p><strong>PROTIP</strong></p>
<p>Because the appearance column includes missing values (NAs), we need to include the argument <code>na.rm=TRUE</code> in the <code>mean()</code> function. Including this will compute the mean only using the cases that have values. If there are missing values and the argument is not included, the result of the mean computation will be <code>NA</code>.</p>
</div>
<p>The output from <code>summarize()</code> is a data frame with a single row and one or more columns, depending on how many summaries you computed. Here we computed a single summary so there is only one column. We also named the column <code>M</code> within the <code>summarize()</code> function.</p>
<p>Multiple summaries can be computed by providing more than one argument to the <code>summarize()</code> function. The output is still a single row data frame, but now there will be multiple columns, one for each summary computation. Here we compute the mean number of appearances for all comic characters in the data and also the standard deviation.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">M =</span> <span class="fu">mean</span>(appearances, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">SD =</span> <span class="fu">sd</span>(appearances, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
      M    SD
  &lt;dbl&gt; &lt;dbl&gt;
1  19.0  93.8</code></pre>
</div>
</div>
<p><br></p>
</section>
<section id="computations-on-groups" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="computations-on-groups"><span class="header-section-number">4.8</span> Computations on Groups</h2>
<p>While we have leaned that, on average, comic characters appear about 20 times. And, that the variation is quite large (<span class="math inline">\(SD=93.8\)</span>), telling us that there are characters who appear many more times (e.g., Spiderman, Susan Storm, Wonder Woman). Although a useful first step in an analysis, this alone does not answer our research question about how the average number of appearances for comic characters identifying as LGBTQ differ from those who don’t. To answer this, we need to compute these summary measures for LGBTQ and non-LGBTQ characters separately.</p>
<p>The <code>group_by()</code> function groups the data by a specified variable. By itself, this function essentially does nothing. But it is powerful when the grouped output is piped into other functions, such as <code>summarize()</code>. Here we use <code>group_by(lgbtq)</code> to compute the mean number of appearances and also the standard deviation for both LGBTQ and non-LGBTQ characters.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(lgbtq) <span class="sc">|&gt;</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">M =</span> <span class="fu">mean</span>(appearances, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">SD =</span> <span class="fu">sd</span>(appearances, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  lgbtq     M    SD
  &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
1 No     18.6  93.3
2 Yes    74.2 143. </code></pre>
</div>
</div>
<p>From this analysis we can see that characters that identify as LGBTQ appear, on average, about 75 times, while those that do not identify as LGBTQ appear only about 20 times. Both groups of characters have a large standard deviation implying that there is a lot of variation in the number of appearances for both groups.</p>
<p>You can also use <code>group_by()</code> with multiple attributes. Simply add additional column names in the <code>group_by()</code> function to create more conditional groups. For example to compute to compute the mean number of appearances and also the standard deviation for both LGBTQ and non-LGBTQ characters conditioned on comic company, we can use the following syntax.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(lgbtq, comic) <span class="sc">|&gt;</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">M =</span> <span class="fu">mean</span>(appearances, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">SD =</span> <span class="fu">sd</span>(appearances, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
# Groups:   lgbtq [2]
  lgbtq comic      M    SD
  &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 No    DC      23.4  87.5
2 No    Marvel  16.6  95.5
3 Yes   DC      44.9  68.6
4 Yes   Marvel  96.6 178. </code></pre>
</div>
</div>
<p>This produces the summary measures for each of the combinations of the <code>lgbtq</code> and <code>comic</code> variables. So while we see that for both DC and Marvel, LGBTQ characters have more appearances, on average, than non-LGBTQ characters, this difference is more more pronounced for Marvel characters.</p>
<p>In one last analysis, we might also compute the sample size associated with these combinations.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>comics <span class="sc">|&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(lgbtq, comic) <span class="sc">|&gt;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">M =</span> <span class="fu">mean</span>(appearances, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">SD =</span> <span class="fu">sd</span>(appearances, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> <span class="fu">n</span>()</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
# Groups:   lgbtq [2]
  lgbtq comic      M    SD     N
  &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
1 No    DC      23.4  87.5  6831
2 No    Marvel  16.6  95.5 16286
3 Yes   DC      44.9  68.6    65
4 Yes   Marvel  96.6 178.     90</code></pre>
</div>
</div>
<p>This added information reminds us that while the average number of appearances for LGBTQ characters is higher than for non-LGBTQ characters (for both DC and Marvel), overwhelming majority of comic characters are non-LGBTQ.</p>
<p><br></p>
</section>
<section id="additional-resources" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="additional-resources"><span class="header-section-number">4.9</span> Additional Resources</h2>
<p>Here are some additional resources for learning <code>{dplyr}</code>.</p>
<ul>
<li><a href="https://www.rstudio.com/resources/cheatsheets/">Data Transformation with dplyr Cheatsheet</a>: A printable cheatsheet for using <code>{dplyr}</code>.</li>
<li><a href="https://suzan.rbind.io/2018/01/dplyr-tutorial-1/">Data Wrangling Part 1: Basic to Advanced Ways to Select Columns</a></li>
<li><a href="https://suzan.rbind.io/2018/02/dplyr-tutorial-2/">Data Wrangling Part 2: Transforming your columns into the right shape</a></li>
<li><a href="https://suzan.rbind.io/2018/02/dplyr-tutorial-3/">Data Wrangling Part 3: Basic and more advanced ways to filter rows</a></li>
<li><a href="https://suzan.rbind.io/2018/04/dplyr-tutorial-4/">Data Wrangling Part 4: Summarizing and slicing your data</a></li>
</ul>
<p><br></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>